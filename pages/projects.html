<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, viewport-fit=cover"
        />
        <meta
            name="description"
            content="Портфолио проектов Михаила - примеры работ в веб-разработке"
        />
        <link rel="stylesheet" href="../styles/styles.css" />
        <title>Проекты | Михаил - Веб-разработчик</title>
    </head>
    <body>
        <!-- Skip-link для доступности -->
        <a href="#main-content" class="skip-link"
            >Перейти к основному содержимому</a
        >

        <div class="page">
            <header class="header" role="banner">
                <h1 class="header__title">Михаил</h1>
                <p class="header__subtitle">Веб-разработчик</p>
            </header>

            <nav class="nav" aria-label="Основная навигация">
                <ul class="nav__list" role="list">
                    <li class="nav__item">
                        <a class="nav__link" href="../index.html">Главная</a>
                    </li>
                    <li class="nav__item">
                        <a
                            class="nav__link nav__link--active"
                            href="projects.html"
                            aria-current="page"
                        >
                            Проекты
                        </a>
                    </li>
                    <li class="nav__item">
                        <a class="nav__link" href="diary.html">Дневник</a>
                    </li>
                    <li class="nav__item">
                        <a class="nav__link" href="contacts.html">Контакты</a>
                    </li>
                </ul>
            </nav>

            <main id="main-content" class="main-content" role="main">
                <header class="projects-header">
                    <h1 class="projects-title">Мои проекты</h1>
                    <p class="projects-subtitle">
                        Здесь собраны мои лучшие работы в области веб-разработки
                    </p>
                </header>

                <section
                    class="projects-section"
                    aria-labelledby="projects-heading"
                >
                    <h2 id="projects-heading" class="visually-hidden">
                        Список проектов
                    </h2>

                    <div class="projects_container">
                        <!-- Проект 1 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project1-title"
                            aria-describedby="project1-desc"
                            data-project="1"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project1-title"
                                    class="project-card__title"
                                >
                                    Интернет-магазин
                                </h3>
                                <p
                                    id="project1-desc"
                                    class="project-card__description"
                                >
                                    Полнофункциональный магазин с корзиной и
                                    оплатой
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">React</li>
                                    <li class="project-tech__item">Node.js</li>
                                    <li class="project-tech__item">MongoDB</li>
                                </ul>
                            </div>
                        </article>

                        <!-- Проект 2 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project2-title"
                            aria-describedby="project2-desc"
                            data-project="2"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project2-title"
                                    class="project-card__title"
                                >
                                    Аналитический дашборд
                                </h3>
                                <p
                                    id="project2-desc"
                                    class="project-card__description"
                                >
                                    Визуализация данных в реальном времени
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">Vue.js</li>
                                    <li class="project-tech__item">D3.js</li>
                                    <li class="project-tech__item">
                                        WebSocket
                                    </li>
                                </ul>
                            </div>
                        </article>

                        <!-- Проект 3 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project3-title"
                            aria-describedby="project3-desc"
                            data-project="3"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project3-title"
                                    class="project-card__title"
                                >
                                    Мобильное приложение
                                </h3>
                                <p
                                    id="project3-desc"
                                    class="project-card__description"
                                >
                                    Кроссплатформенное приложение для iOS и
                                    Android
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">
                                        React Native
                                    </li>
                                    <li class="project-tech__item">Firebase</li>
                                    <li class="project-tech__item">Redux</li>
                                </ul>
                            </div>
                        </article>

                        <!-- Проект 4 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project4-title"
                            aria-describedby="project4-desc"
                            data-project="4"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project4-title"
                                    class="project-card__title"
                                >
                                    API сервис
                                </h3>
                                <p
                                    id="project4-desc"
                                    class="project-card__description"
                                >
                                    RESTful API для управления пользователями
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">
                                        Express.js
                                    </li>
                                    <li class="project-tech__item">
                                        PostgreSQL
                                    </li>
                                    <li class="project-tech__item">JWT</li>
                                </ul>
                            </div>
                        </article>

                        <!-- Проект 5 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project5-title"
                            aria-describedby="project5-desc"
                            data-project="5"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project5-title"
                                    class="project-card__title"
                                >
                                    Игра на WebGL
                                </h3>
                                <p
                                    id="project5-desc"
                                    class="project-card__description"
                                >
                                    3D игра в браузере с использованием WebGL
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">Three.js</li>
                                    <li class="project-tech__item">WebGL</li>
                                    <li class="project-tech__item">
                                        Web Audio API
                                    </li>
                                </ul>
                            </div>
                        </article>

                        <!-- Проект 6 -->
                        <article
                            class="project_card"
                            tabindex="0"
                            role="button"
                            aria-labelledby="project6-title"
                            aria-describedby="project6-desc"
                            data-project="6"
                        >
                            <div class="project-card__content">
                                <h3
                                    id="project6-title"
                                    class="project-card__title"
                                >
                                    PWA Приложение
                                </h3>
                                <p
                                    id="project6-desc"
                                    class="project-card__description"
                                >
                                    Прогрессивное веб-приложение с
                                    офлайн-режимом
                                </p>
                                <ul
                                    class="project-tech__list"
                                    aria-label="Используемые технологии"
                                >
                                    <li class="project-tech__item">PWA</li>
                                    <li class="project-tech__item">
                                        Service Worker
                                    </li>
                                    <li class="project-tech__item">
                                        IndexedDB
                                    </li>
                                </ul>
                            </div>
                        </article>
                    </div>
                </section>
            </main>
        </div>

        <!-- Модальное окно проекта -->
        <div
            id="projectModal"
            class="modal"
            role="dialog"
            aria-modal="true"
            aria-labelledby="modalTitle"
            aria-describedby="modalDescription"
            hidden
        >
            <div class="modal__content">
                <button
                    class="modal__close"
                    aria-label="Закрыть модальное окно"
                >
                    &times;
                </button>
                <h2 id="modalTitle" class="modal__title">Название проекта</h2>

                <div
                    class="modal__gallery"
                    id="modalGallery"
                    aria-label="Галерея изображений проекта"
                >
                    <!-- Изображения будут добавляться динамически -->
                </div>

                <div class="modal__info">
                    <div class="modal__section">
                        <h3 class="modal__section-title">Описание</h3>
                        <p id="modalDescription" class="modal__description">
                            Описание проекта
                        </p>
                    </div>

                    <div class="modal__section">
                        <h3 class="modal__section-title">Технологии</h3>
                        <ul
                            class="modal__tech-list"
                            id="modalTechList"
                            aria-label="Используемые технологии"
                        >
                            <!-- Технологии будут добавляться динамически -->
                        </ul>
                    </div>

                    <div class="modal__section">
                        <h3 class="modal__section-title">Функциональность</h3>
                        <ul
                            class="modal__features-list"
                            id="modalFeaturesList"
                            aria-label="Основные функции"
                        >
                            <!-- Функции будут добавляться динамически -->
                        </ul>
                    </div>
                </div>

                <div class="modal__links">
                    <a
                        href="#"
                        class="modal__link modal__link--live"
                        id="modalLiveLink"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        <span class="modal__link-icon" aria-hidden="true"
                            >🌐</span
                        >
                        Живая версия
                    </a>
                    <a
                        href="#"
                        class="modal__link modal__link--code"
                        id="modalCodeLink"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        <span class="modal__link-icon" aria-hidden="true"
                            >💻</span
                        >
                        Исходный код
                    </a>
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            <p class="footer_text">© 2025 amogus@yandex.ru</p>
        </footer>

        <script>
            // Данные проектов
            const projectsData = {
                1: {
                    title: "Интернет-магазин",
                    description:
                        "Полнофункциональный интернет-магазин с системой управления товарами, корзиной покупок, процессом оформления заказа и интеграцией с платёжными системами. Поддержка различных способов оплаты и доставки.",
                    technologies: [
                        "React",
                        "Node.js",
                        "MongoDB",
                        "Express",
                        "Stripe API",
                    ],
                    features: [
                        "Каталог товаров с фильтрацией",
                        "Корзина покупок",
                        "Система оплаты",
                        "Личный кабинет пользователя",
                        "Админ-панель",
                    ],
                    liveLink: "https://example-shop.com",
                    codeLink: "https://github.com/username/shop",
                },
                2: {
                    title: "Аналитический дашборд",
                    description:
                        "Интерактивная панель управления для визуализации бизнес-метрик в реальном времени. Поддерживает различные типы графиков и отчётов.",
                    technologies: [
                        "Vue.js",
                        "D3.js",
                        "WebSocket",
                        "Node.js",
                        "Chart.js",
                    ],
                    features: [
                        "Графики в реальном времени",
                        "Настраиваемые отчёты",
                        "Экспорт данных",
                        "Уведомления",
                        "Адаптивный дизайн",
                    ],
                    liveLink: "https://analytics.example.com",
                    codeLink: "https://github.com/username/analytics",
                },
                3: {
                    title: "Мобильное приложение",
                    description:
                        "Кроссплатформенное мобильное приложение для iOS и Android с нативным пользовательским интерфейсом и офлайн-функциональностью.",
                    technologies: [
                        "React Native",
                        "Firebase",
                        "Redux",
                        "Native Base",
                        "Expo",
                    ],
                    features: [
                        "Кроссплатформенность",
                        "Офлайн-режим",
                        "Push-уведомления",
                        "Социальная авторизация",
                        "Кэширование данных",
                    ],
                    liveLink: "https://apps.apple.com/app/id123",
                    codeLink: "https://github.com/username/mobile-app",
                },
                4: {
                    title: "API сервис",
                    description:
                        "Масштабируемый RESTful API сервис для управления пользователями с аутентификацией, авторизацией и ролевой моделью доступа.",
                    technologies: [
                        "Express.js",
                        "PostgreSQL",
                        "JWT",
                        "Docker",
                        "Redis",
                    ],
                    features: [
                        "RESTful API",
                        "JWT аутентификация",
                        "Ролевая модель доступа",
                        "Документация API",
                        "Кэширование Redis",
                    ],
                    liveLink: "https://api.example.com/docs",
                    codeLink: "https://github.com/username/api-service",
                },
                5: {
                    title: "Игра на WebGL",
                    description:
                        "Интерактивная 3D игра в браузере с продвинутой графикой, физикой и звуковыми эффектами. Оптимизирована для различных устройств.",
                    technologies: [
                        "Three.js",
                        "WebGL",
                        "Web Audio API",
                        "Cannon.js",
                        "GSAP",
                    ],
                    features: [
                        "3D графика в браузере",
                        "Физический движок",
                        "Пространственный звук",
                        "Анимации",
                        "Адаптивное управление",
                    ],
                    liveLink: "https://game.example.com",
                    codeLink: "https://github.com/username/webgl-game",
                },
                6: {
                    title: "PWA Приложение",
                    description:
                        "Прогрессивное веб-приложение с полноценным офлайн-функционалом, push-уведомлениями и возможностью установки на домашний экран.",
                    technologies: [
                        "PWA",
                        "Service Worker",
                        "IndexedDB",
                        "Workbox",
                        "Web App Manifest",
                    ],
                    features: [
                        "Офлайн-работа",
                        "Установка на устройство",
                        "Push-уведомления",
                        "Быстрая загрузка",
                        "Адаптивный интерфейс",
                    ],
                    liveLink: "https://pwa.example.com",
                    codeLink: "https://github.com/username/pwa-app",
                },
            };

            document.addEventListener("DOMContentLoaded", function () {
                const modal = document.getElementById("projectModal");
                const closeBtn = modal.querySelector(".modal__close");
                const projectCards = document.querySelectorAll(".project_card");
                let previousActiveElement;

                // Обработчики для карточек проектов
                projectCards.forEach((card) => {
                    card.addEventListener("click", function () {
                        openProjectModal(this.dataset.project);
                    });

                    card.addEventListener("keydown", function (e) {
                        if (e.key === "Enter" || e.key === " ") {
                            e.preventDefault();
                            openProjectModal(this.dataset.project);
                        }
                    });
                });

                // Функция открытия модального окна
                function openProjectModal(projectId) {
                    const project = projectsData[projectId];
                    if (!project) return;

                    // Запоминаем активный элемент
                    previousActiveElement = document.activeElement;

                    // Заполняем модальное окно данными
                    document.getElementById("modalTitle").textContent =
                        project.title;
                    document.getElementById("modalDescription").textContent =
                        project.description;
                    document.getElementById("modalLiveLink").href =
                        project.liveLink;
                    document.getElementById("modalCodeLink").href =
                        project.codeLink;

                    // Заполняем технологии
                    const techList = document.getElementById("modalTechList");
                    techList.innerHTML = "";
                    project.technologies.forEach((tech) => {
                        const li = document.createElement("li");
                        li.className = "modal__tech-item";
                        li.textContent = tech;
                        techList.appendChild(li);
                    });

                    // Заполняем функции
                    const featuresList =
                        document.getElementById("modalFeaturesList");
                    featuresList.innerHTML = "";
                    project.features.forEach((feature) => {
                        const li = document.createElement("li");
                        li.className = "modal__feature-item";
                        li.textContent = feature;
                        featuresList.appendChild(li);
                    });

                    // Показываем модальное окно
                    modal.hidden = false;
                    modal.style.display = "block";

                    // Скрываем основной контент от скринридера
                    document.querySelectorAll("main > *").forEach((el) => {
                        if (!el.closest(".modal")) {
                            el.setAttribute("aria-hidden", "true");
                        }
                    });

                    // Фокусируемся на модальном окне
                    modal.focus();

                    // Добавляем обработчики
                    document.addEventListener("keydown", handleEscape);
                    document.addEventListener("keydown", handleTab);
                }

                // Функция закрытия модального окна
                function closeModal() {
                    modal.hidden = true;
                    modal.style.display = "none";

                    // Возвращаем видимость основному контенту
                    document
                        .querySelectorAll('[aria-hidden="true"]')
                        .forEach((el) => {
                            el.removeAttribute("aria-hidden");
                        });

                    // Возвращаем фокус
                    if (previousActiveElement) {
                        previousActiveElement.focus();
                    }

                    // Убираем обработчики
                    document.removeEventListener("keydown", handleEscape);
                    document.removeEventListener("keydown", handleTab);
                }

                // Обработчик Escape
                function handleEscape(event) {
                    if (event.key === "Escape") {
                        closeModal();
                    }
                }

                // Ловушка фокуса внутри модалки
                function handleTab(event) {
                    if (event.key === "Tab") {
                        const focusableElements = modal.querySelectorAll(
                            'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',
                        );
                        const firstElement = focusableElements[0];
                        const lastElement =
                            focusableElements[focusableElements.length - 1];

                        if (
                            event.shiftKey &&
                            document.activeElement === firstElement
                        ) {
                            event.preventDefault();
                            lastElement.focus();
                        } else if (
                            !event.shiftKey &&
                            document.activeElement === lastElement
                        ) {
                            event.preventDefault();
                            firstElement.focus();
                        }
                    }
                }

                // Обработчики закрытия
                closeBtn.addEventListener("click", closeModal);

                modal.addEventListener("click", function (e) {
                    if (e.target === modal) {
                        closeModal();
                    }
                });

                // Добавляем поддержку prefers-reduced-motion
                const style = document.createElement("style");
                if (
                    window.matchMedia("(prefers-reduced-motion: reduce)")
                        .matches
                ) {
                    style.textContent = `
                        .project_card,
                        .modal__link {
                            transition: none !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
            });
        </script>
    </body>
</html>
